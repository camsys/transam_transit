:javascript

  function update_disabled_orgs() {
    var not_transit_ops = JSON.parse('#{Organization.where.not(organization_type_id: OrganizationType.find_by(class_name:'TransitOperator').id).pluck(:id).to_json}');
    $('select.remaining option').attr('disabled', false);
    $.each(not_transit_ops, function( index, value ) {
      $('select.remaining option[value="' + value + '"]').attr('disabled', true);
    });

    var org_id = $('#user_organization_id').val();
    $('#selected_grantees option').attr('disabled', false);
    $('#selected_grantees option[value="' + org_id + '"]').attr('disabled', true);
  }