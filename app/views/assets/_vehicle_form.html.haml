.row
  = simple_form_for(@asset,
  :as => :asset,
  :url => @asset.new_record? ? inventory_index_path : inventory_path,
  :method => @asset.new_record? ? 'post' : 'put',
  :html => {:class => 'form-vertical'},
  :wrapper => :vertical_form,
  :wrapper_mappings => {:check_boxes => :vertical_radio_and_checkboxes,
    :radio_buttons => :vertical_radio_and_checkboxes,
    :file => :vertical_file_input,
    :boolean => :vertical_boolean}) do |f|
    = f.input :asset_type_id, :as => :hidden
    = f.input :asset_subtype_id, :as => :hidden

    .col-md-3
      = dialog_tag('Vehicle Type', {:icon => 'fa fa-refresh', :class => "form_part"}) do
        = f.input :asset_tag, :prompt => "Enter the asset tag...", :label => "Asset Tag"
        = f.input :external_id, :prompt => "Enter any external ID...", :label => "External ID"
        = f.association :manufacturer, :prompt => "Select manufacturer...", :collection => @asset.asset_type.manufacturers
        = f.input :manufacturer_model, :prompt => "Enter manufacturer model...", :label => "Manufacturer Model"
        = f.association :fuel_type, :prompt => "Select type of fuel...", :label => "Fuel Type"
        = f.input :serial_number, :label => "VIN"
        = f.input :manufacture_year, :label => "Manufacture Year"
        = f.input :rebuild_year, :label => "Rebuild Year"
    .col-md-3
      = dialog_tag('Characteristics', {:icon => 'fa fa-refresh', :class => "form_part"}) do
        = f.input :vehicle_length, :label => "Vehicle Length"
        = f.input :seating_capacity, :label => "Seating Capacity"
        = f.input :wheelchair_capacity, :label => "Wheelchair Capacity"
        = f.association :vehicle_features, :as => :check_boxes, :label => "Vehicle Features"
        = f.input :expected_useful_life,  :label => "Expected Useful Life",   :collection => get_max_useful_years_collection
        = f.input :expected_useful_miles, :label => "Expected Useful Miles",  :collection => get_max_useful_miles_collection
    .col-md-3
      = dialog_tag('Purchase', {:icon => 'fa fa-refresh', :class => "form_part"}) do
        = f.input :purchase_cost, :wrapper=> :vertical_prepend, :label => "Purchase Cost" do
          %span.input-group-addon
            %i.fa.fa-usd
          = f.input_field :purchase_cost, :class => "form-control"

        = f.input :purchase_date, :wrapper => :vertical_append, :label => "Purchase Date" do
          = f.input_field :purchase_date, :as => :string, :class => 'form-control datepicker', :data => {'behavior' => 'datepicker'}, :value => f.object.purchase_date.strftime("%m-%d-%Y")
          %span.input-group-addon
            %i.fa.fa-calendar
        = f.input :in_service_date, :wrapper => :vertical_append, :label => "In Service Date" do
          = f.input_field :in_service_date, :as => :string, :class => 'form-control datepicker', :data => {'behavior' => 'datepicker'}, :value => f.object.in_service_date.strftime("%m-%d-%Y")
          %span.input-group-addon
            %i.fa.fa-calendar
        = f.input :purchased_new, :as => :radio_buttons, :label => "Purchased New?"
        = f.association :vendor, :collection => @organization.vendors
        = f.input :license_plate, :label => "License Plate"
        = f.input :title_number, :label => "Title Number"
        = f.association :title_owner, :collection => current_user.organizations, :label => "Title Owner"
    .col-md-3
      = dialog_tag('FTA Reporting', {:icon => 'fa fa-refresh', :class => "form_part"}) do
        = f.association :fta_funding_type, :prompt => "Select funding type...", :label => "FTA Funding Type"
        = f.input :ada_accessible_lift, :label => "ADA Accessible"
        = f.input :fta_emergency_contingency_fleet, :label => "FTA Emergency Contingency Fleet"
        = f.association :fta_vehicle_type, :label => "FTA Vehicle Type"
        = f.association :fta_mode_types, :label => "FTA Mode Types"
        - if @asset.fta_bus?
          = f.association :fta_bus_mode_type, :label => "FTA Bus Mode Type"
        = f.association :fta_service_types, :as => :check_boxes, :label => "FTA Service Types"
        = f.association :fta_ownership_type, :prompt => "Select ownership type...", :label => "FTA Ownership Type"
        = f.association :parent, :collection => SupportFacility.where('organization_id = ?', @asset.organization_id)

        = render :partial => 'grant_purchases_form', :locals => {:f => f}

    .col-md-12
      = f.button :submit, :class => 'btn btn-primary'

:javascript

  // Document Ready
  $(document).ready(function(){
    $('[data-behavior~=datepicker]').datepicker({
      format: "mm-dd-yyyy"
    });
  });
