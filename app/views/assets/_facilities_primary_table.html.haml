.table-responsive
  %table.table.table-hover{:id => 'asset_server_table', :data => {:toggle => 'table',
    :card_view => "false",
    :pagination => 'true',
    :show_pagination_switch => 'true',
    :page_list => "[5, 10, 20, 50, 100]",
    :page_size => current_user.num_table_rows,
    :search => 'true',
    :sticky_header => 'true',
    :sticky_header_offset_y => '65px',
    :export_types => "['csv', 'txt']",
    :show_export => 'true',
    :show_columns => 'true',
    :state_save => 'true',
    :state_save_expire => "1y",
    :show_multi_sort => 'true',
    :single_select => 'false'}}
    %thead
      %tr
        %th.center{:data => {:searchable => 'true'}}= 'Asset ID'
        %th.center{:data => {:searchable => 'true'}}= 'Organization'
        %th.center{:data => {:searchable => 'true'}}= 'Facility Name'
        %th.center{:data => {:searchable => 'true'}}= 'Facility Categorization*'
        %th.center{:data => {:searchable => 'true'}}= 'Component - Sub-Component Type*'
        %th.center{:data => {:searchable => 'true'}}= 'Year'
        %th.center{:data => {:searchable => 'true'}}= 'Class'
        %th.center{:data => {:searchable => 'true'}}= 'Type'
        %th.center{:data => {:searchable => 'true'}}= 'Status'
        %th.center{:data => {:searchable => 'true'}}= 'ESL'
        %th.center{:data => {:searchable => 'true'}}= 'Last Life Cycle Action'
        %th.center{:data => {:searchable => 'true'}}= 'Life Cycle Action Date'
        %th.center{:data => {:visible => 'true', :searchable => 'true'}}= 'External ID'
        %th.center{:data => {:visible => 'true', :searchable => 'true'}}= 'Subtype*'
        %th.center{:data => {:visible => 'true', :searchable => 'true'}}= 'Funding Program (largest %)'
        %th.center{:data => {:visible => 'true', :searchable => 'true'}}= 'Direct Capital Responsibility'
        %th.center{:data => {:visible => 'true', :searchable => 'true'}}= 'Description*'
        %th.center{:data => {:visible => 'true', :searchable => 'true'}}= 'Asset Group'
        %th.center{:data => {:visible => 'true', :searchable => 'true'}}= 'Service Life - Current'
        %th.center{:data => {:visible => 'true', :searchable => 'true'}}= 'TERM Condition'
        %th.center{:data => {:visible => 'true', :searchable => 'true'}}= 'TERM Rating'
        %th.center{:data => {:visible => 'true', :searchable => 'true'}}= 'Date of Condition Assessment'
        %th.center{:data => {:visible => 'true', :searchable => 'true'}}= 'Replace / Rehab Policy (ESL)'
        %th.center{:data => {:visible => 'true', :searchable => 'true'}}= 'ESL - Adjusted'
        %th.center{:data => {:visible => 'true', :searchable => 'true'}}= 'Rebuild / Rehab Type'
        %th.center{:data => {:visible => 'true', :searchable => 'true'}}= 'Date of Rebuild / Rehab'
        %th.center{:data => {:visible => 'true', :searchable => 'true'}}= 'Location'
        %th.center{:data => {:visible => 'true', :searchable => 'true'}}= 'Current Book Value'
        %th.center{:data => {:visible => 'true', :searchable => 'true'}}= 'Replacement Status'
        %th.center{:data => {:visible => 'true', :searchable => 'true'}}= 'Replacement Policy Year'
        %th.center{:data => {:visible => 'true', :searchable => 'true'}}= 'Replacement Actual Year'
        %th.center{:data => {:visible => 'true', :searchable => 'true'}}= 'Scheduled Replacement Cost'
    %tbody
      - @table_view_data.each do |asset|
        %tr
          %td.left= link_to asset.facility.asset_tag, inventory_path(asset.facility)
          -if(!asset.facility.facility_ownership_organization.nil?)
            %td.left= asset.facility.facility_ownership_organization.short_name
          -else
            %td.left= asset.facility.other_facility_ownership_organization.nil?

          %td.left= asset.facility.facility_name

          %td.left= "WHERE DOES Factility Categorizaiton get set?"
          %td.left= "Won't Component - Sub-Component Type this always be - for this table?"

          %td.left= asset.facility.manufacture_year
          %td.left= asset.facility.fta_asset_class.name
          %td.left= asset.facility.asset_subtype.name

          -if(asset.service_status_event.nil?)
            %td.left= 'No Service Status Event Recorded'
          -else
            %td.left= asset.service_status_event.service_status_type.name

          -if(!asset.facility.esl_category_id.nil?)
            %td.left
              %i.fa.fa-flag
          -else
            %td.left= 'What should this flage represent?'

          - most_recent_event = asset.most_recent_asset_event
          -if(most_recent_event.nil?)
            %td.left= 'No Life Cycle Actions'
            %td.left= '-'
          -else
            %td.left= most_recent_event.asset_event_type.name
            %td.left= most_recent_event.updated_at

          %td.left= asset.facility.external_id

          %td.left= "What subtype should this be? SubType?"
          %td.left= "Funding Program Largest %"

          %td.left= asset.facility.direct_capital_responsibility
          %td.left= asset.facility.description

          -#-if(!asset.asset_group.nil?)
          -#  %td.left= asset.asset_group.name
          -#-else
          -#  %td.left= '-'

          -#TODO: Age of the vehicle
          %td.left= asset.facility.depreciation_useful_life

          -if(!asset.condition_event.nil?)
            %td.left= asset.condition_event.condition_type.rating.to_s
            %td.left= asset.condition_event.condition_type.rating
            %td.left= asset.condition_event.updated_at
          -else
            %td.left= 'UNKNOWN'
            %td.left= 'UNKNOWN'
            %td.left= 'UNKNOWN'


          -if(!asset.facility.policy.nil?)
            %td.left= asset.facility.policy.description
          -else
            %td.left= 'Rehab Policy ESL'

          -if(!asset.rebuild_event.nil?)
            %td.left= asset.rebuild_event.extended_useful_life_months
            %td.left= asset.rebuild_event.assessed_rating
            %td.left= asset.rebuild_event.comments
            %td.left= asset.rebuild_event.updated_at
          -else
            %td.left= 'N/A'
            %td.left= 'N/A'
            %td.left= 'N/A'
            %td.left= 'N/A'

          %td.left= asset.facility.location.to_s
          %td.left= asset.facility.book_value

          -if(!asset.early_replacement_status_event.nil?)
            %td.left= asset.early_replacement_status_event.replacement_status_type.name
            %td.left= asset.facility.estimated_replacement_year
            %td.left= asset.early_replacement_status_event.replacement_year
            %td.left= asset.facility.scheduled_replacement_cost
          -else
            %td.left= 'N/A'
            %td.left= 'N/A'
            %td.left= 'N/A'
            %td.left= 'N/A'



