<script type="text/javascript">

  $(document).ready(function() {

    transam.enable_date_pickers();
    transam.make_same_height('.form_part');

      // Page Load Events
      $('#spinner').hide();
      $('.equipment-related-only').hide();
      $('.vehicle-related-only').hide();

      // Search Form AJAX event handling // See https://github.com/rails/jquery-ujs/wiki/ajax
      $("form").on("ajax:send", function(xhr) {
        $('#results_table').hide();
        $('#spinner').show();
      })
      .on("ajax:success", function(xhr) {
        $(".search-panel").collapse('hide');
      })
      .on("ajax:complete", function(xhr, status) {
        $('#spinner').hide();
      });

      $("form").submit(function(){
          $("input:disabled").removeAttr("disabled");
        });

      // Type Selector Handler
      $('#type-selector').on('click', function(event) {
        var selectedOptions = $('#type-selector option:selected');
        classNames = $.map(selectedOptions, function(option){
          return $(option).attr('class');
        });

        var selectedEquipment = ($.inArray("Equipment", classNames) !== -1)

        var selectedVehicles = ($.inArray("Vehicle", classNames) !== -1)
        var selectedSupportVehicles = ($.inArray("SupportVehicle", classNames) !== -1)

        var selectedRailCars = ($.inArray("RailCar", classNames) !== -1)
        var selectedLocomotives = ($.inArray("Locomotive", classNames) !== -1)

        var vehicleFields = (selectedVehicles || selectedSupportVehicles || selectedRailCars || selectedLocomotives)

        var noTypeSpecified = (!selectedEquipment && !vehicleFields)

        if (selectedEquipment){
          $('.equipment-related-only').show();
        }
        else{
          $('.equipment-related-only').hide();
        };

        if (vehicleFields)
          $('.vehicle-related-only').show();
        else
          $('.vehicle-related-only').hide();

        if (noTypeSpecified)
          $('.all-asset-only').show();
        else
          $('.all-asset-only').hide();

        if (!selectedRailCars){
          $('.not-for-railcars :input').removeAttr("disabled");
        }

        if (!selectedLocomotives){
          $('.not-for-locomotives :input').removeAttr("disabled");
        }

        if (!selectedSupportVehicles){
          $('.not-for-support-vehicles :input').removeAttr("disabled");
        }

        if (selectedRailCars){
          $('.not-for-railcars :input').attr("disabled", "disabled");
        }

        if (selectedLocomotives){
          $('.not-for-locomotives :input').attr("disabled", "disabled");
        }
        else{

        }

        if (selectedSupportVehicles){
          $('.not-for-support-vehicles :input').attr("disabled", "disabled");
        }

        $('input:disabled').attr('title', 'This field is disabled because it is incompatible with a vehicle type that you selected.');

      });
  });

</script>
