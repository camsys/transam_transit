:ruby
  table_dom_id = SecureRandom.hex

:css
  .col-item:nth-child(1){
    width:10%;
  }
  .col-item:nth-child(2){
    width:12%;
  }
  .col-item:nth-child(3){
    width:5%;
  }
  .col-item:nth-child(4){
    width:8%;
  }
  .col-item:nth-child(5){
    width:5%;
  }
  .col-item:nth-child(6){
    width:5%;
  }
  .col-item:nth-child(7){
    width:8%;
  }
  .col-item:nth-child(8){
    width:8%;
  }
  .col-item:nth-child(9){
    width:8%;
  }
  .col-item:nth-child(10){
    width:8%;
  }
  .col-item:nth-child(11){
    width:5%;
  }
  .col-item:nth-child(12){
    width:10%;
  }
  .col-item:nth-child(13){
    width:12%;
  }
  .col-item:nth-child(14){
    width:12%;
  }
  .col-item:nth-child(15){
    width:12%;
  }
  .col-item:nth-child(16){
    width:10%;
  }

= javascript_include_tag  "https://kit.fontawesome.com/#{ENV['FONT_AWESOME']}.js"
.library-table
  %table.elbat{:id => table_dom_id,
    :use => 'true',
    :data => {:use => 'true',
      :side => 'client',
      :current_page => '0',
      :current_page_size => '10',
      :page_sizes => "10,20,50,100,200",
      :search => 'client',
      :export => "['csv', 'txt', 'excel']",
      :columns => "Asset ID,drilldown-link,
                  Organization,
                  Description,
                  Subtype,
                  Line,
                  From,
                  Line,
                  To,
                  Track,
                  Max Permissible Speed,
                  Unit,
                  Speed Restriction,
                  Unit,
                  Restriction Cause,
                  Active Start,
                  Active End,
                  Submitted By,
                  Status,
                  Comments,",
      :selected_columns => "Asset ID,
                  Organization,
                  Description,
                  Subtype,
                  Line,
                  From,
                  Line,
                  To,
                  Track,
                  Max Permissible Speed,
                  Unit,
                  Speed Restriction,
                  Unit,
                  Restriction Cause,
                  Active Start,
                  Active End,
                  Submitted By",
      :cookies => "true",
      :sort => 'client',
      :params => "{}",
      :filter => "[]",
      :data_source => 'client',
      :url => ''}}

  - results.each_with_index do |r, index|
    :javascript
      add_row('#{table_dom_id}',
      {
        "Asset ID": '#{h link_to r.id, _path(r)}',
        "Organization": '#{h link_to(r.transam_asset.asset_tag, inventory_path(r.transam_asset.object_key))}',
        "Description": '#{h r.transam_asset.description}',
        "Subtype": '#{h r.transam_asset.asset_subtype}',
        "Line": '#{h r.from_line}',
        "From": '#{h format_as_decimal(r.from_segment)}',
        "Line": '#{h r.to_line}',
        "To": '#{h format_as_decimal(r.to_segment)}',
        "Track": '#{h InfrastructureTrack.find_by(id: r.transam_asset.infrastructure_track_id)}',
        "Max Permissible Speed": '#{h format_as_integer(r.transam_asset.max_permissible_speed)}',
        "Unit": '#{h r.transam_asset.max_permissible_speed_unit}',
        "Speed Restriction": '#{h format_as_integer(r.speed_restriction)}',
        "Unit": '#{h r.speed_restriction_unit}',
        "Restriction Cause": '#{h r.performance_restriction_type}',
        "Active Start": '#{h format_as_date_time(r.start_datetime)}',
        "Active End": '#{h r.end_datetime.present? ? format_as_date_time(r.end_datetime): "Until Removed"}',
        "Submitted By": '#{h r.creator}',
        "Status": '#{h r.state == "started" ? "Active" : r.state.titleize}',
        "Comments": '#{h r.comments}',
      }, #{index});






-#
-#  %thead
-#    %tr
-#      %th.left.nowrap{:data => {:sortable => 'true'}} Asset / Segment ID
-#      - if @organization_list.count > 1
-#        %th.left.nowrap{:data => {:sortable => 'true'}} Org
-#      %th.left.nowrap{:data => {:sortable => 'true'}} Desc / Segment Name
-#      %th.left.nowrap{:data => {:sortable => 'true'}} Subtype
-#      %th.left.nowrap{:data => {:sortable => 'true'}} Line
-#      %th.left.nowrap{:data => {:sortable => 'true'}} From
-#      %th.left.nowrap{:data => {:sortable => 'true'}} Line
-#      %th.left.nowrap{:data => {:sortable => 'true'}} To
-#      %th.left.nowrap{:data => {:sortable => 'true'}} Track
-#      %th.left.nowrap{:data => {:sortable => 'true'}} Max Permissible Speed
-#      %th.left.nowrap{:data => {:sortable => 'true'}} Unit
-#      %th.left.nowrap{:data => {:sortable => 'true'}} Speed Restriction
-#      %th.left.nowrap{:data => {:sortable => 'true'}} Unit
-#      %th.left.nowrap{:data => {:sortable => 'true'}} Restriction Cause
-#      %th.left.nowrap{:data => {:sortable => 'true'}} Active Start
-#      %th.left.nowrap{:data => {:sortable => 'true'}} Active End
-#      %th.left.nowrap{:data => {:sortable => 'true'}} Submitted By
-#      %th.center{:data => {:visible => 'false', :sortable => 'true'}} Status
-#      %th.center{:data => {:visible => 'false', :sortable => 'true'}} Comments
-#      - if can? :update, AssetEvent
-#        %th
-#
-#  %tbody
-#    - results.each do |r|
-#      %tr
-#        %td.left
-#          - if r.num_infrastructure > 1
-#            .asset-event-popup-details{:id => "asset_event_popup_#{r.id}", :data => {:asset_event_key => r.object_key, :title => "Tracks Covered", :toggle => 'popover' }}
-#              = link_to "Multiple", "#", {onclick: "return false"}
-#          - else
-#            = link_to(r.transam_asset.asset_tag, inventory_path(r.transam_asset.object_key))
-#        - if @organization_list.count > 1
-#          %td.left= r.transam_asset.organization.short_name
-#        %td.left
-#          - if r.num_infrastructure > 1
-#            Multiple
-#          - else
-#            = r.transam_asset.description
-#        %td.left
-#          - if r.num_infrastructure > 1
-#            Multiple
-#          - else
-#            = r.transam_asset.asset_subtype
-#        - if r.transam_asset.infrastructure_segment_unit_type.name == 'Marker Posts'
-#          %td.left= r.from_line
-#          %td.left= format_as_decimal(r.from_segment)
-#          %td.left= r.to_line
-#          %td.left= format_as_decimal(r.to_segment)
-#        - else
-#          %td.left{colspan: 4}
-#        %td.left= InfrastructureTrack.find_by(id: r.transam_asset.infrastructure_track_id)
-#        %td.left
-#          - if r.num_infrastructure > 1
-#            Multiple
-#          - else
-#            = format_as_integer(r.transam_asset.max_permissible_speed)
-#        %td.left= r.transam_asset.max_permissible_speed_unit
-#        %td.left= format_as_integer(r.speed_restriction)
-#        %td.left= r.speed_restriction_unit
-#        %td.left= r.performance_restriction_type
-#        %td.left= format_as_date_time(r.start_datetime)
-#        %td.left= r.end_datetime.present? ? format_as_date_time(r.end_datetime): 'Until Removed'
-#        %td.left= r.creator
-#        %td.left= r.state == 'started' ? 'Active' : r.state.titleize
-#        %td.left{data: {tableexport: {value: r.comments}}}
-#          - unless r.comments.blank?
-#            %a.transam-popover{data: {placement: 'left', toggle: 'popover', html: 'true', content: r.comments}, title: 'Comments', tabindex: '0'}
-#              %i.fa.fa-info-circle
-#            %span.hidden= r.comments
-#        %td.left{data: {tableexport: {value: ''}}}
-#          - evt = r.allowable_events.first
-#          - if can? evt.to_sym, r
-#            = link_to fire_workflow_event_inventory_asset_event_path(r.send(Rails.application.config.asset_base_class_name.underscore), r, :event => evt), class: "btn btn-primary btn-sm" do
-#              = "#{evt.titleize}"
-#
-#:javascript
-#
-#  $('#performance-restriction-widget-table').on('post-body.bs.table', function () {
-#    $('.transam-popover').popover({
-#      trigger: 'hover'
-#    });
-#
-#    $('.transam-tooltip').tooltip();
-#  });