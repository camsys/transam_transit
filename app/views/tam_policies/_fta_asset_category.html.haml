- if @fta_asset_category
  - label = (@fta_asset_category.name == 'Facilities' ? 'TERM' : 'ULB')

  %fieldset
    %legend= @fta_asset_category
    .row
      .col-lg-10.col-md-12
        %h5
          - if @tam_group.organization.nil? && @tam_group.parent.nil?
            - total_assets = @tam_group.assets(@fta_asset_category).count
            - assets_past = @tam_group.assets_past_useful_life_benchmark( @fta_asset_category,Date.today).count
            - past_ulb_pcnt =( total_assets > 0 ? assets_past * 100.0/total_assets : 0)
            = "Percentage of #{@fta_asset_category} that exceed the #{label}: #{format_as_percentage(past_ulb_pcnt)}"

        .table-responsive
          %table.table.table-condensed.editable-table
            %thead
              %tr
                %th.left Asset Class/Type
                %th.left= label
                %th.left.all-input-column
                  Editable/Locked

                %th.left Goal Pcnt
                %th.left.all-input-column
                  Editable/Locked

            %tbody
              - @tam_metrics.each do |metric|
                %tr
                  %td.left= @fta_asset_category.get_asset_level_label(metric.asset_level)
                  %td.left.input-column
                    - editable_ulb = (can? :update, @tam_group) && metric.can_update?('useful_life_benchmark')
                    %a.editable-number{class: "#{editable_ulb ? 'editable-cell' : 'not-editable-cell'}", href:"#", id: "#{metric.object_key}_useful_life_benchmark",data: {type:"number", name: 'useful_life_benchmark', value: metric.useful_life_benchmark, resource: 'tam_performance_metric', url: "#{rule_set_tam_policy_tam_group_tam_performance_metric_path(@rule_set_type, @tam_policy, @tam_group, metric)}"} }
                  %td.left
                    - editable_ulb_lock = (can? :update, @tam_group) && metric.can_update?('useful_life_benchmark_locked')
                    %input.toggle-lock{type: :checkbox,
                                       id: "#{metric.object_key}_useful_life_benchmark_locked",
                                       checked: !metric.useful_life_benchmark_locked?,
                                       disabled: !editable_ulb_lock,
                                       data: {toggle: 'toggle',
                                       name: 'useful_life_benchmark_locked',
                                       size: 'small',
                                       on: 'Editable',
                                       off: 'Locked',
                                       url: "#{rule_set_tam_policy_tam_group_tam_performance_metric_path(@rule_set_type, @tam_policy, @tam_group, metric)}"}}
                  %td.left.input-column
                    - editable_pcnt = (can? :update, @tam_group) && metric.can_update?('pcnt_goal')
                    %a.editable-number{class: "#{editable_pcnt ? 'editable-cell' : 'not-editable-cell'}", href:"#", id: "#{metric.object_key}_pcnt_goal",data: {type:"text", name: 'pcnt_goal', value: metric.pcnt_goal,resource: 'tam_performance_metric', url: "#{rule_set_tam_policy_tam_group_tam_performance_metric_path(@rule_set_type, @tam_policy, @tam_group, metric)}"} }
                  %td.left
                    - editable_pcnt_lock = (can? :update, @tam_group) && metric.can_update?('pcnt_goal_locked')
                    %input.toggle-lock{type: :checkbox,
                                       id: "#{metric.object_key}_pcnt_goal_locked",
                                       checked: !metric.pcnt_goal_locked?,
                                       disabled: !editable_pcnt_lock,
                                       data: {toggle: 'toggle',
                                       name: 'pcnt_goal_locked',
                                       size: 'small',
                                       on: 'Editable',
                                       off: 'Locked',
                                       url: "#{rule_set_tam_policy_tam_group_tam_performance_metric_path(@rule_set_type, @tam_policy, @tam_group, metric)}"}}
